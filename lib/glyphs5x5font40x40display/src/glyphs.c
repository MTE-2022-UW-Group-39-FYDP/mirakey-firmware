/*
 * Maps ASCII codes for characters to a 40x40 bit frame buffer for the display.
 * Uses the following 5x5 font: https://www.dafont.com/5x5.font.
 * The bit frames are positioned as such:
 * Byte 1: b1.7|b1.6|b1.5|b1.4|b1.3|b1.2|b1.1|b1.0, Byte 2: b2.7|b2.6|b2.5|b2.4|b2.3|b2.2|b2.1|b2.0, Byte 3: b3.7|b3.6|b3.5|b3.4|b3.3|b3.2|b3.1|b3.0, etc
 *
 *  b1.0 b2.0 b3.0        b40.0 _
 *  b1.1 b2.1 b3.1        b40.1  |
 *  b1.2 b2.2 b3.2        b40.2  |
 *  b1.3 b2.3 b3.3  ....  b40.3  | Row 1
 *  b1.4 b2.4 b3.4        b40.4  |
 *  b1.5 b2.5 b3.5        b40.5  |
 *  b1.6 b2.6 b3.6        b40.6  |
 *  b1.7 b2.7 b3.7        b40.7 _|
 *  b41.0                       _
 *  b41.1                        |
 *  b41.2                        |
 *  b41.3 ....                   | Row 2
 *  b41.4                        |
 *  b41.5                        |
 *  b41.6                        |
 *  b41.7                       _|
 *   .
 *   .
 *   .
 *   .
 *
 *   Total 5 rows
 */

#include <stdio.h>

/* BE CAREFUL WITH THESE MACROS */
#define X 255,255,255,255,255,255,255,255
#define _ 0,0,0,0,0,0,0,0

static const unsigned char map[128][200] = {
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {
                _,_,_,_,_,
                _,_,_,_,_,
                _,_,_,_,_,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {
                X,X,X,X,X,
                X,_,_,X,X,
                X,_,X,_,X,
                X,X,_,_,X,
                X,X,X,X,X
            },
        {
                _,_,X,_,_,
                _,X,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,X,X,X,_
            },
        {
                X,X,X,X,_,
                _,_,_,_,X,
                _,X,X,X,_,
                X,_,_,_,_,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                _,_,_,_,X,
                _,X,X,X,_,
                _,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,_,_,_,_,
                X,_,_,_,_,
                X,_,X,_,_,
                X,X,X,X,X,
                _,_,X,_,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,_,
                _,_,_,_,X,
                X,X,X,X,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                _,_,_,_,X,
                _,_,_,X,_,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X,
                _,_,_,_,X,
                X,X,X,X,X
            },
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,_,_,_,_,
                X,_,_,_,_,
                X,X,X,X,X
            },
        {
                X,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,_,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,_,
                X,_,_,_,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,_,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,X,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                X,X,X,X,X,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                X,X,X,X,X
            },
        {
                _,_,_,X,X,
                _,_,_,_,X,
                _,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,_,_,_,X,
                X,_,_,X,_,
                X,X,X,_,_,
                X,_,_,X,_,
                X,_,_,_,X
            },
        {
                X,_,_,_,_,
                X,_,_,_,_,
                X,_,_,_,_,
                X,_,_,_,_,
                X,X,X,X,X
            },
        {
                X,_,_,_,X,
                X,X,_,X,X,
                X,_,X,_,X,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                X,_,_,_,X,
                X,X,_,_,X,
                X,_,X,_,X,
                X,_,_,X,X,
                X,_,_,_,X
            },
        {
                _,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,X,X,_
            },
        {
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,_,
                X,_,_,_,_,
                X,_,_,_,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,X,
                _,_,X,_,_
            },
        {
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,X,
                _,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,_,X,_,
                _,X,_,X,_,
                _,_,X,_,_
            },
        {
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,X,_,X,
                X,_,X,_,X,
                _,X,_,X,_
            },
        {
                X,_,_,_,X,
                _,X,_,X,_,
                _,_,X,_,_,
                _,X,_,X,_,
                X,_,_,_,X
            },
        {
                X,_,_,_,X,
                _,X,_,X,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                X,X,X,X,X,
                _,_,_,X,_,
                _,_,X,_,_,
                _,X,_,_,_,
                X,X,X,X,X
            },
        {},
        {},
        {},
        {},
        {},
        {},
        {
                _,_,_,_,_,
                _,X,X,X,X,
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,X,X,X
            },
        {
                X,_,_,_,_,
                X,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,_
            },
        {
                _,_,_,_,_,
                _,X,X,X,X,
                X,_,_,_,_,
                X,_,_,_,_,
                _,X,X,X,X
            },
        {
                _,_,_,_,X,
                _,_,_,_,X,
                _,X,X,X,X,
                X,_,_,_,X,
                _,X,X,X,X
            },
        {
                _,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,X,
                X,_,_,_,_,
                _,X,X,X,X
            },
        {
                _,_,_,X,X,
                _,_,X,_,_,
                X,X,X,X,X,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                _,X,X,X,X,
                X,_,_,_,X,
                _,X,X,X,X,
                _,_,_,_,X,
                X,X,X,X,_
            },
        {
                X,_,_,_,_,
                X,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                _,_,X,_,_,
                _,_,_,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                _,_,_,_,X,
                _,_,_,_,_,
                _,_,_,_,X,
                _,_,_,_,X,
                X,X,X,X,_,
            },
        {
                X,_,_,_,_,
                X,_,_,X,_,
                X,X,X,_,_,
                X,_,_,X,_,
                X,_,_,_,X
            },
        {
                _,X,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,X,X,X,_
            },
        {
                _,_,_,_,_,
                X,X,X,X,_,
                X,_,X,_,X,
                X,_,X,_,X,
                X,_,X,_,X
            },
        {
                _,_,_,_,_,
                X,_,X,X,_,
                X,X,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                _,_,_,_,_,
                _,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,X,X,_
            },
        {
                _,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,_,
                X,_,_,_,_
            },
        {
                _,_,_,_,_,
                _,X,X,X,X,
                X,_,_,_,X,
                _,X,X,X,X,
                _,_,_,_,X
            },
        {
                _,_,_,_,_,
                X,_,X,X,X,
                X,X,_,_,_,
                X,_,_,_,_,
                X,_,_,_,_
            },
        {
                _,X,X,X,_,
                X,_,_,_,_,
                _,X,X,_,_,
                _,_,_,X,_,
                X,X,X,_,_
            },
        {
                _,X,_,_,_,
                X,X,X,X,X,
                _,X,_,_,_,
                _,X,_,_,X,
                _,_,X,X,_
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,X,X,
                _,X,X,_,X
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,_,X,_,
                _,_,X,_,_
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                X,_,X,_,X,
                X,X,_,X,X,
                X,_,_,_,X
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                _,X,X,X,_,
                _,X,_,X,_,
                X,_,_,_,X
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                _,X,X,X,X,
                _,_,_,_,X,
                X,X,X,X,_
            },
        {
                _,_,_,_,_,
                X,X,X,X,_,
                _,_,X,_,_,
                _,X,_,_,_,
                X,X,X,X,_
            },
        {},
        {},
        {},
        {},
        {}
};

unsigned char* mapCharToBitmap(char c) {
    int ascii_code = (int)c;
    return map[ascii_code];
}

void render40x40(const unsigned char *bitmap) {
    for (int page = 0; page < 5; page++) {
        for (int pageRow = 0; pageRow < 8; pageRow++) {
            for (int column = 0 + page*40; column < 40 + page*40; column++) {
                int set = bitmap[column] & 1 << pageRow;
                printf("%c", set ? 'X' : ' ');
            }
            printf("\n");
        }
    }
}