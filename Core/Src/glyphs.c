/*
 * Maps ASCII codes for characters to a 40x40 bit frame buffer for the display.
 * Uses the following 5x5 font: https://www.dafont.com/5x5.font.
 * The bit frames are positioned as such:
 * Byte 1: b1.7|b1.6|b1.5|b1.4|b1.3|b1.2|b1.1|b1.0, Byte 2: b2.7|b2.6|b2.5|b2.4|b2.3|b2.2|b2.1|b2.0, Byte 3: b3.7|b3.6|b3.5|b3.4|b3.3|b3.2|b3.1|b3.0, etc
 *
 *  b1.0 b2.0 b3.0        b40.0 _
 *  b1.1 b2.1 b3.1        b40.1  |
 *  b1.2 b2.2 b3.2        b40.2  |
 *  b1.3 b2.3 b3.3  ....  b40.3  | Row 1
 *  b1.4 b2.4 b3.4        b40.4  |
 *  b1.5 b2.5 b3.5        b40.5  |
 *  b1.6 b2.6 b3.6        b40.6  |
 *  b1.7 b2.7 b3.7        b40.7 _|
 *  b41.0                       _
 *  b41.1                        |
 *  b41.2                        |
 *  b41.3 ....                   | Row 2
 *  b41.4                        |
 *  b41.5                        |
 *  b41.6                        |
 *  b41.7                       _|
 *   .
 *   .
 *   .
 *   .
 *
 *   Total 5 rows
 */

#include <stdio.h>
#include <stdint.h>

/* BE CAREFUL WITH THESE MACROS */
#define X 255,255,255,255,255,255,255,255
#define _ 0,0,0,0,0,0,0,0

static const unsigned char map[200][200] = {
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {
                // Backspace
                0,0,0,0,0,0,0,0,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,
                0,0,0,0,240,240,240,240,15,15,15,15,0,0,0,0,0b00110000,0b00110000,0b11000000,0b11000000,0,0,0,0,0,0,0,0,0b11000000,0b11000000,0b00110000,0b00110000,0,0,0,0,255,255,255,255,
                255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0b11000011,0b11000011,0b00111100,0b00111100,0b00111100,0b00111100,0b11000011,0b11000011,0,0,0,0,0,0,0,0,255,255,255,255,
                0,0,0,0,15,15,15,15,240,240,240,240,0,0,0,0,0b00001100,0b00001100,3,3,0,0,0,0,0,0,0,0,3,3,0b00001100,0b00001100,0,0,0,0,255,255,255,255,
                0,0,0,0,0,0,0,0,0,0,0,0,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15
            },
        {},
        {},
        {},
        {},
        {
                // Enter / Carriage return (CR)
                _,_,_,_,_,
                _,0b11000000,0b11000000,_,_,_,240,240,0,0,0,0,
                0,0,0,0,0b00111100,0b00111100,0b11011011,0b11011011,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011000,0b00011111,0b00011111,0,0,0,0,
                _,0b00000011,0b00000011,0,0,0,0,0,0,_,_,_,
                _,_,_,_,_
            },
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {
                // esc
                _,_,_,_,_,
                _,_,_,_,_,
                0,0,0,0,0b00111100,0b01001010,0b10001001,0b10001001,0b10001001,0b10001001,0b01001010,0b00101100,0,0,0,0,0b00101100,0b01001010,0b10001001,0b10001001,0b10001001,0b10001001,0b01001010,0b00110000,0,0,0,0,0b00111100,0b01000010,0b10000001,0b10000001,0b10000001,0b10000001,0b01000010,0b00100100,0,0,0,0,
                _,_,_,_,_,
                _,_,_,_,_,
            },
        {},
        {},
        {},
        {},
        {
                _,_,_,_,_,
                _,_,_,_,_,
                _,_,_,_,_,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {
                X,X,X,X,X,
                X,_,_,X,X,
                X,_,X,_,X,
                X,X,_,_,X,
                X,X,X,X,X
            },
        {
                _,_,X,_,_,
                _,X,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,X,X,X,_
            },
        {
                X,X,X,X,_,
                _,_,_,_,X,
                _,X,X,X,_,
                X,_,_,_,_,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                _,_,_,_,X,
                _,X,X,X,_,
                _,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,_,_,_,_,
                X,_,_,_,_,
                X,_,X,_,_,
                X,X,X,X,X,
                _,_,X,_,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,_,
                _,_,_,_,X,
                X,X,X,X,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                _,_,_,_,X,
                _,_,_,X,_,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X,
                _,_,_,_,X,
                X,X,X,X,X
            },
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,_,_,_,_,
                X,_,_,_,_,
                X,X,X,X,X
            },
        {
                X,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,_,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,_,
                X,_,_,_,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,_,X,X,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,X,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                X,X,X,X,X,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                X,X,X,X,X
            },
        {
                _,_,_,X,X,
                _,_,_,_,X,
                _,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,_,_,_,X,
                X,_,_,X,_,
                X,X,X,_,_,
                X,_,_,X,_,
                X,_,_,_,X
            },
        {
                X,_,_,_,_,
                X,_,_,_,_,
                X,_,_,_,_,
                X,_,_,_,_,
                X,X,X,X,X
            },
        {
                X,_,_,_,X,
                X,X,_,X,X,
                X,_,X,_,X,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                X,_,_,_,X,
                X,X,_,_,X,
                X,_,X,_,X,
                X,_,_,X,X,
                X,_,_,_,X
            },
        {
                _,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,X,X,_
            },
        {
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,_,
                X,_,_,_,_,
                X,_,_,_,_
            },
        {
                X,X,X,X,X,
                X,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,X,
                _,_,X,_,_
            },
        {
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                X,X,X,X,X,
                X,_,_,_,_,
                X,X,X,X,X,
                _,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,X,X,X,X,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X,
                X,X,X,X,X
            },
        {
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,_,X,_,
                _,X,_,X,_,
                _,_,X,_,_
            },
        {
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,X,_,X,
                X,_,X,_,X,
                _,X,_,X,_
            },
        {
                X,_,_,_,X,
                _,X,_,X,_,
                _,_,X,_,_,
                _,X,_,X,_,
                X,_,_,_,X
            },
        {
                X,_,_,_,X,
                _,X,_,X,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                X,X,X,X,X,
                _,_,_,X,_,
                _,_,X,_,_,
                _,X,_,_,_,
                X,X,X,X,X
            },
        {},
        {},
        {},
        {},
        {},
        {},
        {
                _,_,_,_,_,
                _,X,X,X,X,
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,X,X,X
            },
        {
                X,_,_,_,_,
                X,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,_
            },
        {
                _,_,_,_,_,
                _,X,X,X,X,
                X,_,_,_,_,
                X,_,_,_,_,
                _,X,X,X,X
            },
        {
                _,_,_,_,X,
                _,_,_,_,X,
                _,X,X,X,X,
                X,_,_,_,X,
                _,X,X,X,X
            },
        {
                _,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,X,
                X,_,_,_,_,
                _,X,X,X,X
            },
        {
                _,_,_,X,X,
                _,_,X,_,_,
                X,X,X,X,X,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                _,X,X,X,X,
                X,_,_,_,X,
                _,X,X,X,X,
                _,_,_,_,X,
                X,X,X,X,_
            },
        {
                X,_,_,_,_,
                X,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                _,_,X,_,_,
                _,_,_,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                _,_,_,_,X,
                _,_,_,_,_,
                _,_,_,_,X,
                _,_,_,_,X,
                X,X,X,X,_,
            },
        {
                X,_,_,_,_,
                X,_,_,X,_,
                X,X,X,_,_,
                X,_,_,X,_,
                X,_,_,_,X
            },
        {
                _,X,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                _,X,X,X,_
            },
        {
                _,_,_,_,_,
                X,X,X,X,_,
                X,_,X,_,X,
                X,_,X,_,X,
                X,_,X,_,X
            },
        {
                _,_,_,_,_,
                X,_,X,X,_,
                X,X,_,_,X,
                X,_,_,_,X,
                X,_,_,_,X
            },
        {
                _,_,_,_,_,
                _,X,X,X,_,
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,X,X,_
            },
        {
                _,_,_,_,_,
                X,X,X,X,_,
                X,_,_,_,X,
                X,X,X,X,_,
                X,_,_,_,_
            },
        {
                _,_,_,_,_,
                _,X,X,X,X,
                X,_,_,_,X,
                _,X,X,X,X,
                _,_,_,_,X
            },
        {
                _,_,_,_,_,
                X,_,X,X,X,
                X,X,_,_,_,
                X,_,_,_,_,
                X,_,_,_,_
            },
        {
                _,X,X,X,_,
                X,_,_,_,_,
                _,X,X,_,_,
                _,_,_,X,_,
                X,X,X,_,_
            },
        {
                _,X,_,_,_,
                X,X,X,X,X,
                _,X,_,_,_,
                _,X,_,_,X,
                _,_,X,X,_
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                X,_,_,_,X,
                X,_,_,X,X,
                _,X,X,_,X
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                X,_,_,_,X,
                _,X,_,X,_,
                _,_,X,_,_
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                X,_,X,_,X,
                X,X,_,X,X,
                X,_,_,_,X
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                _,X,X,X,_,
                _,X,_,X,_,
                X,_,_,_,X
            },
        {
                _,_,_,_,_,
                X,_,_,_,X,
                _,X,X,X,X,
                _,_,_,_,X,
                X,X,X,X,_
            },
        {
                _,_,_,_,_,
                X,X,X,X,_,
                _,_,X,_,_,
                _,X,_,_,_,
                X,X,X,X,_
            },
        {},
        {},
        {},
        {},
        {},
        {
                // Layer Toggle symbol
                X,X,X,_,_,
                _,X,X,X,_,
                _,_,X,X,X,
                _,X,X,X,_,
                X,X,X,_,_
        },
        {
                // Left arrow
                _,X,_,_,_,
                X,_,_,_,_,
                X,X,X,X,X,
                X,_,_,_,_,
                _,X,_,_,_
        },
        {
                // Up arrow
                _,X,X,X,_,
                X,_,X,_,X,
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_
        },
        {
                // Right arrow
                _,_,_,X,_,
                _,_,_,_,X,
                X,X,X,X,X,
                _,_,_,_,X,
                _,_,_,X,_
        },
        {
                // Down Arrow
                _,_,X,_,_,
                _,_,X,_,_,
                _,_,X,_,_,
                X,_,X,_,X,
                _,X,X,X,_
        },
        {
                // print screen
                _,_,_,_,_,
                _,_,0,0,0,0,240,240,0,0,_,_,
                0,0,0,0,255,255,0b11000011,0b11000011,0b11000011,0b11000011,0b00111100,0b00111100,0,255,255,3,3,3,0,3,255,255,3,0,0b11011111,0b11011111,0b11011011,0b11011011,0b11011011,0b11011011,0,255,255,0b11000011,0b11000011,0b11000011,0b11000011,0,0,0,
                0,0,0,0,255,255,0,0,_,_,_,_,
                _,_,_,_,_
        },
        {
                // home
                _,_,_,_,_,
                0,0,0,0,240,240,0,0,_,_,_,_,
                0,0,0,0,255,255,3,3,3,255,255,0,255,255,0b11000011,0b11000011,0b11000011,255,255,0,255,255,3,255,255,3,255,255,0,255,255,0b11011011,0b11011011,0b11011011,0b11011111,0b11011111,0,0,0,0,
                _,_,_,_,_,
                _,_,_,_,_
            },
        {
                // Page up
                _,_,_,_,_,
                _,_,_,_,_,
                0,0,0,0,255,255,0b11000011,0b11000011,0b11000011,255,255,0,255,255,0b11000011,0b11000011,0b11000011,255,255,0,0,255,255,0b11000000,0b11000000,0b11000000,255,255,0,255,255,0b11000011,0b11000011,0b11000011,255,255,0,0,0,0,
                0,0,0,0,0b00111111,0b00111111,0,0,0,0,0,0,0b00110000,0b00110000,0b00110000,0b00110000,0b00110000,0b00111111,0b00111111,0,0,_,0b00111111,0b00111111,0,_,
                _,_,_,_,_
            },
        {
                // Page down
                _,_,_,_,_,
                _,_,_,0,0,252,252,0,0,0,0,_,
                0,0,0,0,255,255,0b11000011,0b11000011,0b11000011,255,255,0,255,255,0b11000011,0b11000011,0b11000011,255,255,0,0,255,255,0b11000011,0b11000011,0b11000011,255,255,0,255,255,3,3,3,255,255,0,0,0,0,
                0,0,0,0,0b00111111,0b00111111,0,0,0,0,0,0,0b00110000,0b00110000,0b00110000,0b00110000,0b00110000,0b00111111,0b00111111,0,0,_,0b00111111,0b00111111,0,_,
                _,_,_,_,_
            },
        {
                // esc
                _,_,_,_,_,
                _,_,_,0,0,0,0,0,252,252,0,_,
                _,255,255,0b11011011,0b11011011,0b11011011,0b11011111,0b11011111,0,255,255,3,3,3,255,255,0,255,255,0b11000011,0b11000011,0b11000011,255,255,0,_,
                _,_,_,_,_,
                _,_,_,_,_,
            },
        {
                // Play
                _,X,_,_,_,
                _,X,X,_,_,
                _,X,X,X,_,
                _,X,X,_,_,
                _,X,_,_,_
            },
        {
                // Pause
                _,X,_,X,_,
                _,X,_,X,_,
                _,X,_,X,_,
                _,X,_,X,_,
                _,X,_,X,_
            },
        {
                // Previous
                X,_,_,X,_,
                X,_,X,X,_,
                X,X,X,X,_,
                X,_,X,X,_,
                X,_,_,X,_
            },
        {
                // Next
                _,X,_,_,X,
                _,X,X,_,X,
                _,X,X,X,X,
                _,X,X,_,X,
                _,X,_,_,X
            },
        {
                // Volume Up
                _,_,X,_,_,
                _,_,X,_,_,
                X,X,X,X,X,
                _,_,X,_,_,
                _,_,X,_,_
            },
        {
                // Volume Down
                _,_,_,_,_,
                _,_,_,_,_,
                X,X,X,X,X,
                _,_,_,_,_,
                _,_,_,_,_
            },
        {
                // Save
                0,0,0,0,0b11110000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b11110000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,240,0b00100000,0b01000000,0b10000000,0,_,
                0,0,0,0,255,0,0,0,0,0,0,0,0b00011111,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00010000,0b00011111,0,0,0,1,2,4,8,240,0,0,0,0,
                0,0,0,0,255,0,0,0,240,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,240,0,0,0,255,0,0,0,0,
                0,0,0,0,255,0,0,0,255,0,0,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0b00100001,0,0,255,0,0,0,255,0,0,0,0,
                0,0,0,0,15,8,8,8,15,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,15,8,8,8,15,0,0,0,0
            },
        {
                // Print
                _,0,0,240,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,240,0,0,_,
                0,0,0,0,0,192,224,224,224,224,255,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,255,224,224,224,224,192,0,0,0,0,0,
                0,0,0,0,0,255,255,255,X,X,255,255,255,255,255,255,0b11111100,0b11111100,255,255,255,0,0,0,0,0,
                0,0,0,0,0,255,255,255,255,255,255,0,0b10001000,0b10001000,0b10001000,0b11001000,0b01001000,0b01001000,0b01001000,0b11001000,0b10001000,0b10001000,0b10001000,0b10001000,0b10001000,0b10001000,0b10001100,0,0,255,255,255,255,255,255,0,0,0,0,0,
                0,0,0,0,0,0,1,1,1,1,0b00111111,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0b00111111,1,1,1,1,0,0,0,0,0,0
            },
        {
                // Find
                _,_,0,0,0,0,128,128,192,192,192,192,192,192,128,128,0,0,_,
                _,0,0,0,0,0,0,0,224,0b11111000,252,254,63,15,7,7,3,3,3,3,7,7,15,63,254,252,0b11111000,224,0,0,0,0,0,
                _,0,0,0,0,0,0,0,0b10000111,0b11011111,255,255,252,240,224,224,192,192,192,192,224,224,240,252,127,63,31,7,0,0,0,0,0,
                0,0,0,0,0,0,0,128,192,224,240,248,252,0b01111110,63,31,15,7,3,1,1,1,3,3,3,3,3,3,1,1,0,0,_,
                0,0,0,0,0,0,7,15,15,7,3,1,0,0,0,0,_,_,_
            },
        {
                // Undo
            },
        {
                // Redo
            },
        {
                // Cut
            },
        {
                // Copy
            },
        {
                // Paste
            },
        {
                // New
            },
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {},
        {}
};

unsigned char* mapCharToBitmap(uint8_t c) {
    int ascii_code = (uint8_t)c;
    return map[ascii_code];
}

void render40x40(const unsigned char *bitmap) {
    for (int page = 0; page < 5; page++) {
        for (int pageRow = 0; pageRow < 8; pageRow++) {
            for (int column = 0 + page*40; column < 40 + page*40; column++) {
                int set = bitmap[column] & 1 << pageRow;
                printf("%c", set ? 'X' : ' ');
            }
            printf("\n");
        }
    }
}